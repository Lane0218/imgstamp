# ImgStamp UI 设计文档

## 1. 设计原则
- **工程导向**：优先展示信息密度和操作效率，而非花哨的视觉效果。
- **直观反馈**：所有状态变化（选中、修改、保存）都需要有即时的视觉反馈。
- **符合直觉**：遵循 Windows 常见桌面软件的布局习惯（如资源管理器、Lightroom 简化版）。

## 2. 全局布局
采用 **“顶部菜单栏 + 三栏内容区 + 底部状态栏”** 的布局。

```
+-----------------------------------------------------------------------------------+
|  [顶部菜单栏]                                                                     |
+---------------------+-------------------------------+-----------------------------+
|                     |                               |                             |
|  [左侧：资源管理器]  |      [中间：实时预览区]        |    [右侧：属性编辑面板]      |
|  显示图片缩略图列表  |      显示当前选中图的成品效果   |    编辑当前图的元数据        |
|  占据 20% 宽度       |      占据 55% 宽度            |    占据 25% 宽度            |
|                     |                               |                             |
+---------------------+-------------------------------+-----------------------------+
|  [底部状态栏]                                                                     |
+-----------------------------------------------------------------------------------+
```

## 3. 详细区域设计

### 3.1 顶部菜单栏
放置全局操作菜单（文字为主）。
- **文件操作**：
  - `打开文件夹` (导入)
  - `保存项目`
  - `打开项目`
- **输出设置** (影响预览与导出)：
  - `目标尺寸`：在菜单项中切换 `5寸 (12.7x8.9cm)` / `6寸`。
- **导出操作**：
  - `导出成品`

### 3.2 左侧：资源管理器
以垂直滚动列表形式展示源图片。
- **布局**：单列或双列网格。
- **卡片内容**：
  - 小缩略图。
  - 文件名（鼠标悬停时显示）。
  - 状态图标（缩略图右上角小圆点）：
    - 黄色：已选但信息不完整。
    - 绿色：已选且信息完整。
- **交互**：
  - **单击**：切换中间预览区显示的图片，并联动右侧面板。
  - **Ctrl/Shift + 点击**：多选（支持批量编辑，中间预览区显示该批次的第一张图）。
  - **右键菜单**：`移除`、`打开所在文件夹`。
  - **布局切换**：提供单列/两列/三列/四列视图切换，默认两列；用图标按钮循环切换列数。
  - **分页**：当图片数量过多时分页显示；每页数量随窗口高度自适应，确保当前页缩略图完整显示。

### 3.3 中间：实时预览区
**核心体验区域**，所见即所得。
- **画布**：
  - 背景色：中灰色 (#E0E0E0) 或深色，突出照片主体。
  - **实时渲染**：显示当前照片叠加了白边、日期、地点、描述后的最终效果。
  - **渲染逻辑**：
    - 默认生成预览图，使用主进程 Sharp 渲染缩小版（与导出同一布局算法）。
    - 当右侧数据变更时，防抖触发预览更新。
  - **控制条**：
    - 图标按钮：放大/缩小/查看原图（位于预览图上方）。
  - **多选模式**：预览区显示本次多选中的第一张图片。

### 3.4 右侧：属性编辑面板
用于编辑当前选中图片的信息。若多选，则显示“批量编辑模式”。

#### 3.4.1 头部信息
- 显示当前文件名 / "已选中 N 张图片"。
- 说明：选中即加入导出列表，不提供额外开关。

#### 3.3.2 核心表单
1.  **拍摄日期**
    - 组件：`DatePicker` (仅日期)。
    - 辅助按钮：`复位到 EXIF`。
2.  **拍摄地点**
    - 组件：`AutoComplete` (自动补全输入框)。
    - 数据源：从历史输入记录中读取。
    - 占位符："例如：上海市"。
3.  **描述**
    - 组件：`Input` (单行文本框)。
    - 占位符："记录当下的心情或事件（限单行）..."。

#### 3.3.3 快捷操作区
位于面板底部。
- 按钮：`复制上一张信息` —— 极高频功能。
- 按钮：`应用到所有选中` (仅在多选模式下显示)。

### 3.4 底部状态栏
- 左侧：`总计: 200 张` | `已选: 15 张` | `待完善: 5 张`
- 右侧：显示当前处理状态（如 "正在读取 EXIF..." 或 "已保存"）。

### 3.5 导出弹窗
点击“导出成品”后弹出。
- **设置项**：
  - **输出目录**：选择文件夹。
  - **图片质量**：`高质量 (JPG 95%)` / `中等`。
- **预览区**：默认生成并显示第一张图的效果预览。
- **操作**：`开始导出` (显示进度条)。

## 4. 交互与反馈细节

- **快捷键支持**：
  - `← / →`：切换选中图片。
  - `Space`：标记/取消标记“已选”（仅在缩略图列表获得焦点时生效）。
  - `Ctrl + S`：保存项目。
- **空状态**：
  - 当未导入文件夹时，主界面显示引导页：“拖入文件夹 或 点击打开”。
- **加载状态**：
  - 图片加载时显示骨架屏或加载转圈。

## 5. 组件库选型
- **布局**: `Layout`, `Sider`, `Content`, `Header`, `Footer`
- **输入**: `DatePicker`, `Input`, `AutoComplete`, `Switch`
- **反馈**: `Message` (全局提示), `Modal` (导出/大图), `Spin` (加载)
- **图标**: `@ant-design/icons` (使用通用图标如 `FolderOpenOutlined`, `SaveOutlined`)
